"use strict";(self.webpackChunkstarknet_devnet=self.webpackChunkstarknet_devnet||[]).push([[398],{3905:(e,t,n)=>{n.d(t,{Zo:()=>b,kt:()=>u});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=a.createContext({}),s=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},b=function(e){var t=s(e.components);return a.createElement(i.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},k=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,i=e.parentName,b=c(e,["components","mdxType","originalType","parentName"]),d=s(n),k=o,u=d["".concat(i,".").concat(k)]||d[k]||p[k]||r;return n?a.createElement(u,l(l({ref:t},b),{},{components:n})):a.createElement(u,l({ref:t},b))}));function u(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,l=new Array(r);l[0]=k;var c={};for(var i in t)hasOwnProperty.call(t,i)&&(c[i]=t[i]);c.originalType=e,c[d]="string"==typeof e?e:o,l[1]=c;for(var s=2;s<r;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}k.displayName="MDXCreateElement"},558:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>c,toc:()=>s});var a=n(7462),o=(n(7294),n(3905));const r={sidebar_position:8},l="Blocks",c={unversionedId:"guide/blocks",id:"guide/blocks",title:"Blocks",description:'Devnet starts with a genesis block (with block number equal to 0 and block hash equal to "0x0").',source:"@site/docs/guide/blocks.md",sourceDirName:"guide",slug:"/guide/blocks",permalink:"/starknet-devnet/docs/guide/blocks",draft:!1,editUrl:"https://github.com/0xSpaceShard/starknet-devnet/blob/master/page/docs/guide/blocks.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8},sidebar:"tutorialSidebar",previous:{title:"Block explorer",permalink:"/starknet-devnet/docs/guide/block-explorer"},next:{title:"Lite mode",permalink:"/starknet-devnet/docs/guide/lite-mode"}},i={},s=[{value:"Create an empty block",id:"create-an-empty-block",level:3},{value:"Create a block on demand",id:"create-a-block-on-demand",level:3},{value:"Abort blocks",id:"abort-blocks",level:3}],b={toc:s},d="wrapper";function p(e){let{components:t,...n}=e;return(0,o.kt)(d,(0,a.Z)({},b,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"blocks"},"Blocks"),(0,o.kt)("p",null,"Devnet starts with a genesis block (with block number equal to ",(0,o.kt)("inlineCode",{parentName:"p"},"0")," and block hash equal to ",(0,o.kt)("inlineCode",{parentName:"p"},'"0x0"'),")."),(0,o.kt)("p",null,"A new block is generated with each new transaction unless you opt for ",(0,o.kt)("a",{parentName:"p",href:"#create-a-block-on-demand"},"creating blocks on demand"),"."),(0,o.kt)("h3",{id:"create-an-empty-block"},"Create an empty block"),(0,o.kt)("p",null,"To create an empty block without transactions, ",(0,o.kt)("inlineCode",{parentName:"p"},"POST")," a request to ",(0,o.kt)("inlineCode",{parentName:"p"},"/create_block"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"POST /create_block\n")),(0,o.kt)("p",null,"Response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"{'block_hash': '0x115e1b390cafa7942b6ab141ab85040defe7dee9bef3bc31d8b5b3d01cc9c67'}\n")),(0,o.kt)("h3",{id:"create-a-block-on-demand"},"Create a block on demand"),(0,o.kt)("p",null,"If you start Devnet with the ",(0,o.kt)("inlineCode",{parentName:"p"},"--blocks-on-demand")," CLI option, all valid transactions will be stored in a pending block (targetable via block ID ",(0,o.kt)("inlineCode",{parentName:"p"},'"pending"'),"). Since Devnet v0.5.5, the status of these transactions is no longer pending, but accepted. The status of the block is pending."),(0,o.kt)("p",null,"To create a block on demand, send a ",(0,o.kt)("inlineCode",{parentName:"p"},"POST")," request to ",(0,o.kt)("inlineCode",{parentName:"p"},"/create_block"),". This will convert the pending block to the latest block (targetable via block ID ",(0,o.kt)("inlineCode",{parentName:"p"},'"latest"'),"), giving it a block hash and a block number. All subsequent transactions will be stored to a new pending block."),(0,o.kt)("p",null,"In case of demanding block creation with no pending transactions, a new empty block will be generated."),(0,o.kt)("p",null,"The creation of the genesis block is not affected by this feature."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"POST /create_block\n")),(0,o.kt)("p",null,"Response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"{'block_hash': '0x115e1b390cafa7942b6ab141ab85040defe7dee9bef3bc31d8b5b3d01cc9c67'}\n")),(0,o.kt)("h3",{id:"abort-blocks"},"Abort blocks"),(0,o.kt)("p",null,"This functionality allows to simulate block abortion that can occur on mainnet."),(0,o.kt)("p",null,"You can abort blocks and reject transactions from the specified block to the currently latest block. Newly created blocks after the abortion will have accepted status and will continue with numbering where the last accepted block left off."),(0,o.kt)("p",null,"The state of Devnet will be reverted to the state of the last accepted block. In block-on-demand mode, the pending block will be mined and aborted."),(0,o.kt)("p",null,"E.g. assume there are 3 accepted blocks numbered 1, 2 and 3. Upon receiving a request to abort blocks starting with block 2, the blocks numbered 2 and 3 are aborted and their transactions rejected. The state of network will be as it was in block 1. Once a new block is mined, it will be accepted and it will have number 2."),(0,o.kt)("p",null,"Aborted blocks can only be queried by block hash. Aborting the genesis block, blocks in forking origin and already aborted blocks is not supported and results in an error."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'POST /abort_blocks\n{\n    "startingBlockHash": BLOCK_HASH\n}\n')),(0,o.kt)("p",null,"Response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'{\n    "aborted": [BLOCK_HASH_0, BLOCK_HASH_1, ...]\n}\n')))}p.isMDXComponent=!0}}]);